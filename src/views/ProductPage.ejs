<%- include('layouts/header') %>

<head>
    <link rel="stylesheet" href="/public/css/productpage.css">
</head>

<div class="container-xxl py-5 bg-dark hero-header mb-5">
    <div class="container text-center my-5 pt-5 pb-4">
        <h1 class="display-3 text-white mb-3 animated slideInDown">Item</h1>
    </div>
</div>

<link rel='stylesheet' href='https://sachinchoolur.github.io/lightslider/dist/css/lightslider.css'>
<div class="container-fluid mt-2 mb-3" style="padding-left:80px; padding-right:80px;">
    <div class="row no-gutters">
        <div class="col-md-5 pr-2">
            <div class="card">
                <div class="demo">
                    <ul id="lightSlider">
                        <li data-thumb="/uploads/<%=item.image%>">
                            <img src="/uploads/<%=item.image%>" />
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card mt-2">
                <h6>Reviews</h6>
                <div class="d-flex flex-row">
                    <div class="stars">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                    </div>
                    <span class="ml-1 font-weight-bold">4.6</span>
                </div>
                <hr>
                <div class="badges">
                    <span class="badge bg-dark ">All (230)</span>
                    <span class="badge bg-dark ">
                        <i class="fa fa-image"></i> 23
                    </span>
                    <span class="badge bg-dark ">
                        <i class="fa fa-comments-o"></i> 23
                    </span>
                    <span class="badge bg-warning">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <span class="ml-1">2,123</span>
                    </span>
                </div>
                <hr>
                <div class="comment-section">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex flex-row align-items-center">
                            <img src="https://i.imgur.com/o5uMfKo.jpg" class="rounded-circle profile-image">
                            <div class="d-flex flex-column ml-1 comment-profile">
                                <div class="comment-ratings">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                </div>
                                <span class="username">Lori Benneth</span>
                            </div>
                        </div>
                        <div class="date">
                            <span class="text-muted">2 May</span>
                        </div>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex flex-row align-items-center">
                            <img src="https://i.imgur.com/tmdHXOY.jpg" class="rounded-circle profile-image">
                            <div class="d-flex flex-column ml-1 comment-profile">
                                <div class="comment-ratings">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                </div>
                                <span class="username">Timona Simaung</span>
                            </div>
                        </div>
                        <div class="date">
                            <span class="text-muted">12 May</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-7">
            <div class="card">
                <h4 class="font-weight-bold">Category</h4>
                <div class="d-flex flex-row align-items-center">
                    <%=item.category.name%>
                </div>

                <br>

                <h4 class="font-weight-bold">Name</h4>
                <div>
                    <span class="font-weight-bold"><%=item.name%></span>
                    <br><br>
                    <h4 class="font-weight-bold">Rs. <span class="productPrice"><%= item.full_price %></span></h4>
                </div>
<br>
<br>
                <!-- Form for adding the item to the cart -->
                <form id="addToCartForm">
                    <div class="quantity-input">
                        <button type="button" id="decreaseQuantity" class="btn btn-light">-</button>
                        <input type="number" id="quantity" value="1" min="1" style="width: 50px; border:none;text-align: center;">
                        <button type="button" id="increaseQuantity" class="btn btn-light">+</button>
                    </div>
                    <br>
                    <br>
                    <input type="hidden" id="itemId" value="<%= item._id %>">

                    <!-- Portion selector (Full or Half) -->
                    <div class="my-quantity">
                        <label class="radio">
                            <input type="radio" name="p_quantity" value="full" id="fullQuantity" checked>
                            <span class="label">F</span>
                        </label>
                        <label class="radio">
                            <input type="radio" name="p_quantity" value="half" id="halfQuantity">
                            <span class="label">H</span>
                        </label>
                    </div>
<input type="hidden" value="<%= item.name %>" id="item_name">
                    <!-- Quantity input with plus and minus buttons -->
                    <input type="hidden" id="item_image" name="image" value="/uploads/<%= item.image %>">

                    <div class="buttons">
                        <button type="submit" class="btn btn-outline-warning btn-long cart">Add to Cart</button>
                    </div>
                </form>

                <hr>

                <div class="product-description">
                    <div><span class="font-weight-bold">Quantity</span></div>

                    <!-- Hidden inputs to pass full and half price values to the JS -->
                    <input type="hidden" id="fullPriceValue" value="<%= item.full_price %>">
                    <input type="hidden" id="halfPriceValue" value="<%= item.half_price %>">

                    <br><br>
                    <h4 class="font-weight-bold">Description</h4>
                    <p><%= item.description %></p>
                </div>
            </div>

            <div class="card mt-2">
                <span>Similar items:</span>
                <div class="similar-products mt-2 d-flex flex-row">
                    <% relatedItems.forEach(function(item) { %>
                        <div class="card border p-1" style="width: 9rem; margin-right: 3px;">
                            <img src="/uploads/<%=item.image%>" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h6 class="card-title"><%=item.full_price%></h6>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/public/js/ProductPage.js"></script>

<%- include('layouts/footer') %>
